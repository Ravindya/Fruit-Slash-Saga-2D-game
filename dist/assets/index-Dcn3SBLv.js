(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const n=document.querySelector("#character"),B=document.getElementById("score"),L=document.getElementById("game-over"),x=document.getElementById("game-win"),H=document.getElementById("final-score"),U=document.getElementById("your-score"),Y=document.getElementById("Exit1"),J=document.getElementById("Exit2"),j=document.getElementById("next-level"),z=document.getElementById("restart"),_=document.getElementById("winingcup-counter");await new Promise(t=>{document.querySelector("#start-screen > button").addEventListener("click",async()=>{await document.querySelector("html").requestFullscreen({navigationUI:"hide"}),document.querySelector("#start-screen").remove(),t()})});let u=0,E=!1;await new Promise(function(t){const e=["/image/BG.jpg","/image/tile/Tile (1).png","/image/tile/Tile (2).png","/image/tile/Tile (3).png",...Array(10).fill("/image/character").flatMap((r,l)=>[`${r}/Jump__00${l}.png`,`${r}/Idle__00${l}.png`,`${r}/Run__00${l}.png`,`${r}/Attack__00${l}.png`])];for(const r of e){const l=new Image;l.src=r,l.addEventListener("load",o)}const a=document.getElementById("bar"),c=e.length;function o(){e.pop(),a.style.width=`${100/c*(c-e.length)}%`,e.length||setTimeout(()=>{document.getElementById("overlay").classList.add("hide"),t()},1e3)}});const f=document.getElementById("background-music"),X=document.getElementById("gift-music"),D=document.getElementById("lose-game-music"),K=document.getElementById("win-game-music");function C(){f.play(),f.volume=.5,f.addEventListener("ended",()=>{f.currentTime=0,f.play()})}C();let d="";function V(){E=!1,u=0,R(),B.textContent=`Score: ${u}`,L.classList.add("hide"),y=0,_.textContent=`You earned Wining Cups: ${y}`,G(d)}let m=0,i=0,T=0,v=!1,w=!1,b=0,g,p,A,s,I,h=!1;const k=[];let S=4;const M=1500;let $=setInterval(q,M);function W(){A=setInterval(()=>{w?(n.style.backgroundImage=`url('/image/character/Jump__00${i++}.png')`,i===10&&(i=0)):!v&&!h&&(n.style.backgroundImage=`url('/image/character/Idle__00${i++}.png')`,i===10&&(i=0)),h?(n.style.backgroundImage=`url('/image/character/Attack__00${i++}.png')`,i===10&&(i=0)):v&&(n.style.backgroundImage=`url('/image/character/Run__00${i++}.png')`,i===10&&(i=0))},1e3/30)}W();function R(){const t=setInterval(()=>{const e=n.offsetTop+T++*.2;if(n.offsetTop>=innerHeight-128-n.offsetHeight){clearInterval(t);return}n.style.top=`${e}px`},20)}R();function F(){if(g)return;i=0,w=!0;const t=n.offsetTop;g=setInterval(()=>{const e=t-Math.sin(Q(b++))*150;n.style.top=`${e}px`,b===181&&(clearInterval(g),g=void 0,w=!1,b=0,i=0)},1)}function Q(t){return t*Math.PI/180}function O(t){p||(v=!0,i=0,t?(m=-10,n.classList.add("rotate")):(m=10,n.classList.remove("rotate")),p=setInterval(()=>{if(m===0){clearInterval(p),p=void 0,v=!1,i=0;return}const e=n.offsetLeft+m;if(e+n.offsetWidth>=innerWidth||e<=0){e<=0?n.style.left="0":n.style.left=`${innerWidth-n.offsetWidth-1}px`,m=0;return}n.style.left=`${e}px`},20))}function Z(){s||(h=!0,i=0,s=setInterval(()=>{v&&(clearInterval(s),s=void 0,h=!1,i=0)},30))}addEventListener("keydown",t=>{if(E!==!0)switch(t.code){case"ArrowLeft":case"ArrowRight":O(t.code==="ArrowLeft");break;case"Space":F();break;case"ArrowUp":Z()}});addEventListener("keyup",t=>{if(E!==!0)switch(t.code){case"ArrowLeft":case"ArrowRight":m=0;break;case"ArrowUp":clearInterval(s),s=void 0,h=!1}});const P=()=>{n.style.top=`${innerHeight-128-n.offsetHeight}px`,n.offsetLeft>=innerWidth&&(n.style.left=`${innerWidth-n.offsetWidth-1}px`)};addEventListener("resize",P);screen.orientation.addEventListener("change",P);n.addEventListener("touchmove",t=>{if(!I){I=t.touches.item(0);return}const e=t.touches.item(0);O(e.clientX-I.clientX<0),e.clientY<I.clientY&&F(),I=e});n.addEventListener("touchend",t=>{I=null,m=0});function q(){const t=["/image/fruits/avocado.png","/image/fruits/watermelon.png","/image/fruits/cherry.png","/image/fruits/lemon.png","/image/fruits/strawberry.png","/image/fruits/red_apple.png","/image/fruits/fruitbomb.png","/image/fruits/winingcup.png"],e=Math.floor(Math.random()*t.length);d=document.createElement("div"),d.className="fruit",d.style.backgroundImage=`url('${t[e]}')`,d.style.left=`${Math.random()*(window.innerWidth-100)}px`,document.body.appendChild(d),k.push(d),G(d)}function G(t){const e=setInterval(()=>{let a=t.offsetTop+S;t.style.top=`${a}px`,te(),a>=window.innerHeight-155&&(t.classList.add("hide"),t.remove(),clearInterval(e))},20)}function ee(t,e){const a=t.getBoundingClientRect(),c=e.getBoundingClientRect();return!(a.right<c.left||a.left>c.right||a.bottom<c.top||a.top>c.bottom)}let y=0;function te(){document.querySelectorAll(".fruit").forEach(e=>{ee(n,e)&&(e.style.backgroundImage.includes("fruitbomb.png")?re():e.style.backgroundImage.includes("winingcup.png")?e.classList.contains("sliced")||(e.classList.add("sliced"),X.play(),y++,_.textContent=`You earned Wining Cups: ${y}`,y===3&&ne()):h&&!e.classList.contains("sliced")&&(e.classList.add("sliced"),setTimeout(()=>{e.remove(),u+=2,B.textContent=`Score: ${u}`},200)))})}function ne(){clearInterval(g),clearInterval(p),clearInterval(s),clearInterval($),f.pause(),K.play(),E=!1,U.textContent=u,x.style.display="block",x.classList.remove("hide")}function re(){clearInterval(g),clearInterval(p),clearInterval(s),clearInterval($),f.pause(),D.play(),E=!0,H.textContent=u,L.style.display="block",L.classList.remove("hide")}function N(){clearInterval(g),clearInterval(p),clearInterval(s),clearInterval(A),clearInterval($),C(),v=!1,h=!1,w=!1,T=0,u=0,B.textContent=`Score: ${u}`,L.classList.add("hide"),x.classList.add("hide"),n.style.top="-20px",n.style.left="20px",y=0,_.textContent=`You earned Wining Cups: ${y}`,k.forEach(t=>t.remove()),k.length=0,W(),V(),$=setInterval(q,M)}N();z.addEventListener("click",()=>{location.reload()});j.addEventListener("click",()=>{S+=1,N()});Y.addEventListener("click",()=>{location.reload()});J.addEventListener("click",()=>{location.reload()});
